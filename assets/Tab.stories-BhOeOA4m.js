import{j as J}from"./jsx-runtime-DR9Q75dM.js";import{c as re}from"./clsx-B-dksMZM.js";import{n as j,O as ne,K as U,b as B,o as k,L as q,$ as oe,a as Pe,_ as ue,u as G}from"./render-BP9QO1k2.js";import{r as o,R as D}from"./index-DRjF_FHU.js";import{w as ye}from"./use-active-press-rHJ2hxsR.js";import{e as Ie}from"./use-resolve-button-type--EdyZz88.js";import{y as K}from"./use-sync-refs-C4KtZHb2.js";import{f as ie,s as $e,o as h}from"./keyboard-C4gFvqHy.js";import{_,T as H,P as A,F as P}from"./focus-management-B3UXw2xS.js";import{u as Ee,t as we}from"./use-disposables-Bc217F-y.js";function ke(){let e=o.useRef(!1);return j(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Fe({onFocus:e}){let[t,n]=o.useState(!0),r=ke();return t?D.createElement(ie,{as:"button",type:"button",features:$e.Focusable,onFocus:s=>{s.preventDefault();let l,a=50;function u(){if(a--<=0){l&&cancelAnimationFrame(l);return}if(e()){if(cancelAnimationFrame(l),!r.current)return;n(!1);return}l=requestAnimationFrame(u)}l=requestAnimationFrame(u)}}):null}const de=o.createContext(null);function Se(){return{groups:new Map,get(e,t){var n;let r=this.groups.get(e);r||(r=new Map,this.groups.set(e,r));let s=(n=r.get(t))!=null?n:0;r.set(t,s+1);let l=Array.from(r.keys()).indexOf(t);function a(){let u=r.get(t);u>1?r.set(t,u-1):r.delete(t)}return[l,a]}}}function Ae({children:e}){let t=o.useRef(Se());return o.createElement(de.Provider,{value:t},e)}function ce(e){let t=o.useContext(de);if(!t)throw new Error("You must wrap your component in a <StableCollection>");let n=o.useId(),[r,s]=t.current.get(e,n);return o.useEffect(()=>s,[]),r}var De=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(De||{}),Re=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(Re||{}),Ce=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(Ce||{});let Me={0(e,t){var n;let r=_(e.tabs,d=>d.current),s=_(e.panels,d=>d.current),l=r.filter(d=>{var g;return!((g=d.current)!=null&&g.hasAttribute("disabled"))}),a={...e,tabs:r,panels:s};if(t.index<0||t.index>r.length-1){let d=G(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>G(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(l.length===0)return a;let g=G(d,{0:()=>r.indexOf(l[0]),1:()=>r.indexOf(l[l.length-1])});return{...a,selectedIndex:g===-1?e.selectedIndex:g}}let u=r.slice(0,t.index),x=[...r.slice(t.index),...u].find(d=>l.includes(d));if(!x)return a;let m=(n=r.indexOf(x))!=null?n:e.selectedIndex;return m===-1&&(m=e.selectedIndex),{...a,selectedIndex:m}},1(e,t){if(e.tabs.includes(t.tab))return e;let n=e.tabs[e.selectedIndex],r=_([...e.tabs,t.tab],l=>l.current),s=e.selectedIndex;return e.info.current.isControlled||(s=r.indexOf(n),s===-1&&(s=e.selectedIndex)),{...e,tabs:r,selectedIndex:s}},2(e,t){return{...e,tabs:e.tabs.filter(n=>n!==t.tab)}},3(e,t){return e.panels.includes(t.panel)?e:{...e,panels:_([...e.panels,t.panel],n=>n.current)}},4(e,t){return{...e,panels:e.panels.filter(n=>n!==t.panel)}}},Y=o.createContext(null);Y.displayName="TabsDataContext";function R(e){let t=o.useContext(Y);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,R),n}return t}let Q=o.createContext(null);Q.displayName="TabsActionsContext";function X(e){let t=o.useContext(Q);if(t===null){let n=new Error(`<${e} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,X),n}return t}function Oe(e,t){return G(t.type,Me,e,t)}let Le="div";function _e(e,t){let{defaultIndex:n=0,vertical:r=!1,manual:s=!1,onChange:l,selectedIndex:a=null,...u}=e;const x=r?"vertical":"horizontal",m=s?"manual":"auto";let d=a!==null,g=B({isControlled:d}),F=K(t),[p,c]=o.useReducer(Oe,{info:g,selectedIndex:a??n,tabs:[],panels:[]}),C=o.useMemo(()=>({selectedIndex:p.selectedIndex}),[p.selectedIndex]),M=B(l||(()=>{})),I=B(p.tabs),b=o.useMemo(()=>({orientation:x,activation:m,...p}),[x,m,p]),S=k(f=>(c({type:1,tab:f}),()=>c({type:2,tab:f}))),O=k(f=>(c({type:3,panel:f}),()=>c({type:4,panel:f}))),v=k(f=>{T.current!==f&&M.current(f),d||c({type:0,index:f})}),T=B(d?e.selectedIndex:p.selectedIndex),E=o.useMemo(()=>({registerTab:S,registerPanel:O,change:v}),[]);j(()=>{c({type:0,index:a??n})},[a]),j(()=>{if(T.current===void 0||p.tabs.length<=0)return;let f=_(p.tabs,$=>$.current);f.some(($,w)=>p.tabs[w]!==$)&&v(f.indexOf(p.tabs[T.current]))});let z={ref:F},L=q();return D.createElement(Ae,null,D.createElement(Q.Provider,{value:E},D.createElement(Y.Provider,{value:b},b.tabs.length<=0&&D.createElement(Fe,{onFocus:()=>{var f,$;for(let w of I.current)if(((f=w.current)==null?void 0:f.tabIndex)===0)return($=w.current)==null||$.focus(),!0;return!1}}),L({ourProps:z,theirProps:u,slot:C,defaultTag:Le,name:"Tabs"}))))}let Ge="div";function je(e,t){let{orientation:n,selectedIndex:r}=R("Tab.List"),s=K(t),l=o.useMemo(()=>({selectedIndex:r}),[r]),a=e,u={ref:s,role:"tablist","aria-orientation":n};return q()({ourProps:u,theirProps:a,slot:l,defaultTag:Ge,name:"Tabs.List"})}let Ne="button";function Ue(e,t){var n,r;let s=o.useId(),{id:l=`headlessui-tabs-tab-${s}`,disabled:a=!1,autoFocus:u=!1,...x}=e,{orientation:m,activation:d,selectedIndex:g,tabs:F,panels:p}=R("Tab"),c=X("Tab"),C=R("Tab"),[M,I]=o.useState(null),b=o.useRef(null),S=K(b,t,I);j(()=>c.registerTab(b),[c,b]);let O=ce("tabs"),v=F.indexOf(b);v===-1&&(v=O);let T=v===g,E=k(i=>{var y;let W=i();if(W===H.Success&&d==="auto"){let Te=(y=Ee(b))==null?void 0:y.activeElement,te=C.tabs.findIndex(he=>he.current===Te);te!==-1&&c.change(te)}return W}),z=k(i=>{let y=F.map(W=>W.current).filter(Boolean);if(i.key===h.Space||i.key===h.Enter){i.preventDefault(),i.stopPropagation(),c.change(v);return}switch(i.key){case h.Home:case h.PageUp:return i.preventDefault(),i.stopPropagation(),E(()=>A(y,P.First));case h.End:case h.PageDown:return i.preventDefault(),i.stopPropagation(),E(()=>A(y,P.Last))}if(E(()=>G(m,{vertical(){return i.key===h.ArrowUp?A(y,P.Previous|P.WrapAround):i.key===h.ArrowDown?A(y,P.Next|P.WrapAround):H.Error},horizontal(){return i.key===h.ArrowLeft?A(y,P.Previous|P.WrapAround):i.key===h.ArrowRight?A(y,P.Next|P.WrapAround):H.Error}}))===H.Success)return i.preventDefault()}),L=o.useRef(!1),f=k(()=>{var i;L.current||(L.current=!0,(i=b.current)==null||i.focus({preventScroll:!0}),c.change(v),we(()=>{L.current=!1}))}),$=k(i=>{i.preventDefault()}),{isFocusVisible:w,focusProps:be}=oe({autoFocus:u}),{isHovered:Z,hoverProps:me}=Pe({isDisabled:a}),{pressed:ee,pressProps:xe}=ye({disabled:a}),ge=o.useMemo(()=>({selected:T,hover:Z,active:ee,focus:w,autofocus:u,disabled:a}),[T,Z,w,ee,u,a]),ve=ue({ref:S,onKeyDown:z,onMouseDown:$,onClick:f,id:l,role:"tab",type:Ie(e,M),"aria-controls":(r=(n=p[v])==null?void 0:n.current)==null?void 0:r.id,"aria-selected":T,tabIndex:T?0:-1,disabled:a||void 0,autoFocus:u},be,me,xe);return q()({ourProps:ve,theirProps:x,slot:ge,defaultTag:Ne,name:"Tabs.Tab"})}let qe="div";function Ke(e,t){let{selectedIndex:n}=R("Tab.Panels"),r=K(t),s=o.useMemo(()=>({selectedIndex:n}),[n]),l=e,a={ref:r};return q()({ourProps:a,theirProps:l,slot:s,defaultTag:qe,name:"Tabs.Panels"})}let We="div",Be=ne.RenderStrategy|ne.Static;function He(e,t){var n,r,s,l;let a=o.useId(),{id:u=`headlessui-tabs-panel-${a}`,tabIndex:x=0,...m}=e,{selectedIndex:d,tabs:g,panels:F}=R("Tab.Panel"),p=X("Tab.Panel"),c=o.useRef(null),C=K(c,t);j(()=>p.registerPanel(c),[p,c]);let M=ce("panels"),I=F.indexOf(c);I===-1&&(I=M);let b=I===d,{isFocusVisible:S,focusProps:O}=oe(),v=o.useMemo(()=>({selected:b,focus:S}),[b,S]),T=ue({ref:C,id:u,role:"tabpanel","aria-labelledby":(r=(n=g[I])==null?void 0:n.current)==null?void 0:r.id,tabIndex:b?x:-1},O),E=q();return!b&&((s=m.unmount)==null||s)&&!((l=m.static)!=null&&l)?D.createElement(ie,{"aria-hidden":"true",...T}):E({ourProps:T,theirProps:m,slot:v,defaultTag:We,features:Be,visible:b,name:"Tabs.Panel"})}let Ve=U(Ue),fe=U(_e),pe=U(je),ze=U(Ke),Je=U(He),Ye=Object.assign(Ve,{Group:fe,List:pe,Panels:ze,Panel:Je});var N=(e=>(e.Filled="filled",e.Outlined="outlined",e))(N||{});const Qe=({className:e,items:t,mode:n=N.Filled,selectedIndex:r,defaultIndex:s,onChange:l})=>(r!==void 0&&s!==void 0&&console.warn("Only one of selectedIndex or defaultIndex should be provided"),J.jsx(fe,{onChange:l,selectedIndex:r,defaultIndex:s,children:J.jsx(pe,{className:re("tab",n,e,"tab-list"),children:t.map(({key:a,label:u},x)=>J.jsx(Ye,{className:re("transition-all duration-300"),"aria-selected":r===x?"true":"false","aria-label":u,children:u},a))})})),ut={component:Qe,argTypes:{mode:{type:"string",control:{type:"radio",labels:{filled:"Filled",outlined:"Outlined"}},options:[N.Filled,N.Outlined]}}},V={args:{items:[{key:"1",label:"yes"},{key:"2",label:"no"},{key:"3",label:"unknown"}],mode:N.Filled}};var ae,le,se;V.parameters={...V.parameters,docs:{...(ae=V.parameters)==null?void 0:ae.docs,source:{originalSource:`{
  args: {
    items: [{
      key: '1',
      label: 'yes'
    }, {
      key: '2',
      label: 'no'
    }, {
      key: '3',
      label: 'unknown'
    }],
    mode: TabMode.Filled
  }
}`,...(se=(le=V.parameters)==null?void 0:le.docs)==null?void 0:se.source}}};const it=["Default"];export{V as Default,it as __namedExportsOrder,ut as default};
